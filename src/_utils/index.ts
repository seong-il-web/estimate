// priceCalculator.ts

interface PriceCalculatorParams {
  coverPaper?: string;
  coverWeight?: string;
  innerWeight?: string;
  binding?: string;
  innerPrinting?: string;
  innerPages: number;
  quantity: number;
}

const priceTable: any = {
  "성일(표지 스노우지 유광 무광 단면코팅)": {
    "180g": {
      "80모조 무선": {
        컬러: [73, 63.5, 56, 51, 44, 44, 43, 43, 42, 40.5, 38.2, 33.5],
        흑백: [66, 57, 39, 34, 30, 30, 29.5, 29.5, 29.5, 28.5, 28, 25],
      },
      "100모조 무선": {
        컬러: [75, 65, 56, 51, 44.5, 44.5, 43.3, 43.3, 42, 40.5, 39, 33.5],
        흑백: [68, 59, 39, 34, 30, 30, 29.5, 29.5, 29, 28, 27.5, 25],
      },
      "80모조 스프링": {
        컬러: [87, 77, 62.5, 57.5, 51.5, 51.5, 50.2, 50.2, 49.2, 48, 46.8, 40],
        흑백: [80, 71, 46, 41, 37.2, 37.2, 36.8, 36.8, 36.2, 35.2, 34.8, 31],
      },
      "100모조 스프링": {
        컬러: [88, 79, 62.7, 57.8, 51.5, 51.5, 50.2, 50.2, 49.2, 48, 46.8, 40],
        흑백: [82, 72, 46, 41, 37.2, 37.2, 36.8, 36.78, 36.2, 35.2, 34.78, 31],
      },
    },
    "200g": {
      // 200g에 대한 데이터 추가 (이미지에 없는 데이터이므로 실제 데이터로 교체 필요)
      "80모조 무선": {
        컬러: [73, 63.5, 56, 51, 44, 44, 43, 43, 42, 40.5, 38.2, 33.5],
        흑백: [66, 57, 39, 34, 30, 30, 29.5, 29.5, 29.5, 28.5, 28, 25],
      },
      "100모조 무선": {
        컬러: [75, 65, 56, 51, 44.5, 44.5, 43.3, 43.3, 42, 40.5, 39, 33.5],
        흑백: [68, 59, 39, 34, 30, 30, 29.5, 29.5, 29, 28, 27.5, 25],
      },
      "80모조 스프링": {
        컬러: [87, 77, 62.5, 57.5, 51.5, 51.5, 50.2, 50.2, 49.2, 48, 46.8, 40],
        흑백: [80, 71, 46, 41, 37.2, 37.2, 36.8, 36.8, 36.2, 35.2, 34.8, 31],
      },
      "100모조 스프링": {
        컬러: [88, 79, 62.7, 57.8, 51.5, 51.5, 50.2, 50.2, 49.2, 48, 46.8, 40],
        흑백: [82, 72, 46, 41, 37.2, 37.2, 36.8, 36.78, 36.2, 35.2, 34.78, 31],
      },
    },
    "250g": {
      // 250g에 대한 데이터 추가 (이미지에 없는 데이터이므로 실제 데이터로 교체 필요)
      "80모조 무선": {
        컬러: [73, 63.5, 56, 51, 44, 44, 43, 43, 42, 40.5, 38.2, 33.5],
        흑백: [66, 57, 39, 34, 30, 30, 29.5, 29.5, 29.5, 28.5, 28, 25],
      },
      "100모조 무선": {
        컬러: [75, 65, 56, 51, 44.5, 44.5, 43.3, 43.3, 42, 40.5, 39, 33.5],
        흑백: [68, 59, 39, 34, 30, 30, 29.5, 29.5, 29, 28, 27.5, 25],
      },
      "80모조 스프링": {
        컬러: [87, 77, 62.5, 57.5, 51.5, 51.5, 50.2, 50.2, 49.2, 48, 46.8, 40],
        흑백: [80, 71, 46, 41, 37.2, 37.2, 36.8, 36.8, 36.2, 35.2, 34.8, 31],
      },
      "100모조 스프링": {
        컬러: [88, 79, 62.7, 57.8, 51.5, 51.5, 50.2, 50.2, 49.2, 48, 46.8, 40],
        흑백: [82, 72, 46, 41, 37.2, 37.2, 36.8, 36.78, 36.2, 35.2, 34.78, 31],
      },
    },
    "300g": {
      // 300g에 대한 데이터 추가 (이미지에 없는 데이터이므로 실제 데이터로 교체 필요)
      "80모조 무선": {
        컬러: [73, 63.5, 56, 51, 44, 44, 43, 43, 42, 40.5, 38.2, 33.5],
        흑백: [66, 57, 39, 34, 30, 30, 29.5, 29.5, 29.5, 28.5, 28, 25],
      },
      "100모조 무선": {
        컬러: [75, 65, 56, 51, 44.5, 44.5, 43.3, 43.3, 42, 40.5, 39, 33.5],
        흑백: [68, 59, 39, 34, 30, 30, 29.5, 29.5, 29, 28, 27.5, 25],
      },
      "80모조 스프링": {
        컬러: [87, 77, 62.5, 57.5, 51.5, 51.5, 50.2, 50.2, 49.2, 48, 46.8, 40],
        흑백: [80, 71, 46, 41, 37.2, 37.2, 36.8, 36.8, 36.2, 35.2, 34.8, 31],
      },
      "100모조 스프링": {
        컬러: [88, 79, 62.7, 57.8, 51.5, 51.5, 50.2, 50.2, 49.2, 48, 46.8, 40],
        흑백: [82, 72, 46, 41, 37.2, 37.2, 36.8, 36.78, 36.2, 35.2, 34.78, 31],
      },
    },
  },
  "성일(표지 랑데뷰지 유광 무광 단면코팅)": {
    "190g": {
      "80모조 무선": {
        컬러: [73.5, 64, 56.5, 51.5, 44.5, 44.5, 43.5, 43.5, 42.5, 41, 38.7, 34],
        흑백: [66.5, 57.5, 39.5, 34.5, 30.5, 30.5, 30, 30, 30, 29, 28.5, 25.5],
      },
      "100모조 무선": {
        컬러: [75.5, 65.5, 56.5, 51.5, 45, 45, 43.8, 43.8, 42.5, 41, 39.5, 34],
        흑백: [68.5, 59.5, 39.5, 34.5, 30.5, 30.5, 30, 30, 29.5, 28.5, 28, 25.5],
      },
      "80모조 스프링": {
        컬러: [87.5, 77.5, 63, 58, 52, 52, 50.7, 50.7, 49.7, 48.5, 47.3, 40.5],
        흑백: [80.5, 71.5, 46.5, 41.5, 37.7, 37.7, 37.3, 37.3, 36.7, 35.7, 35.3, 31.5],
      },
      "100모조 스프링": {
        컬러: [88.5, 79.5, 63.2, 58.3, 52, 52, 50.7, 50.7, 49.7, 48.5, 47.3, 40.5],
        흑백: [82.5, 72.5, 46.5, 41.5, 37.7, 37.7, 37.3, 37.28, 36.7, 35.7, 35.28, 31.5],
      },
    },
    "210g": {
      // 210g에 대한 데이터 추가 (이미지에 없는 데이터이므로 실제 데이터로 교체 필요)
      "80모조 무선": {
        컬러: [73.5, 64, 56.5, 51.5, 44.5, 44.5, 43.5, 43.5, 42.5, 41, 38.7, 34],
        흑백: [66.5, 57.5, 39.5, 34.5, 30.5, 30.5, 30, 30, 30, 29, 28.5, 25.5],
      },
      "100모조 무선": {
        컬러: [75.5, 65.5, 56.5, 51.5, 45, 45, 43.8, 43.8, 42.5, 41, 39.5, 34],
        흑백: [68.5, 59.5, 39.5, 34.5, 30.5, 30.5, 30, 30, 29.5, 28.5, 28, 25.5],
      },
      "80모조 스프링": {
        컬러: [87.5, 77.5, 63, 58, 52, 52, 50.7, 50.7, 49.7, 48.5, 47.3, 40.5],
        흑백: [80.5, 71.5, 46.5, 41.5, 37.7, 37.7, 37.3, 37.3, 36.7, 35.7, 35.3, 31.5],
      },
      "100모조 스프링": {
        컬러: [88.5, 79.5, 63.2, 58.3, 52, 52, 50.7, 50.7, 49.7, 48.5, 47.3, 40.5],
        흑백: [82.5, 72.5, 46.5, 41.5, 37.7, 37.7, 37.3, 37.28, 36.7, 35.7, 35.28, 31.5],
      },
    },
    "240g": {
      // 240g에 대한 데이터 추가 (이미지에 없는 데이터이므로 실제 데이터로 교체 필요)
      "80모조 무선": {
        컬러: [73.5, 64, 56.5, 51.5, 44.5, 44.5, 43.5, 43.5, 42.5, 41, 38.7, 34],
        흑백: [66.5, 57.5, 39.5, 34.5, 30.5, 30.5, 30, 30, 30, 29, 28.5, 25.5],
      },
      "100모조 무선": {
        컬러: [75.5, 65.5, 56.5, 51.5, 45, 45, 43.8, 43.8, 42.5, 41, 39.5, 34],
        흑백: [68.5, 59.5, 39.5, 34.5, 30.5, 30.5, 30, 30, 29.5, 28.5, 28, 25.5],
      },
      "80모조 스프링": {
        컬러: [87.5, 77.5, 63, 58, 52, 52, 50.7, 50.7, 49.7, 48.5, 47.3, 40.5],
        흑백: [80.5, 71.5, 46.5, 41.5, 37.7, 37.7, 37.3, 37.3, 36.7, 35.7, 35.3, 31.5],
      },
      "100모조 스프링": {
        컬러: [88.5, 79.5, 63.2, 58.3, 52, 52, 50.7, 50.7, 49.7, 48.5, 47.3, 40.5],
        흑백: [82.5, 72.5, 46.5, 41.5, 37.7, 37.7, 37.3, 37.28, 36.7, 35.7, 35.28, 31.5],
      },
    },
  },
};

export function calculatePrice({
  coverPaper,
  coverWeight,
  innerWeight,
  binding,
  innerPrinting,
  innerPages,
  quantity,
}: PriceCalculatorParams): number {
  if (!coverPaper || !coverWeight || !innerWeight || !binding || !innerPrinting) {
    return 0;
  }

  const paperType =
    coverPaper === "스노우지" ? "성일(표지 스노우지 유광 무광 단면코팅)" : "성일(표지 랑데뷰지 유광 무광 단면코팅)";
  const weightKey = `${coverWeight}g`;
  const bindingKey = `${innerWeight}모조 ${binding === "무선제본" ? "무선" : "스프링"}`;
  const printingKey = innerPrinting === "양면칼라" ? "컬러" : "흑백";

  // 페이지 수에 따른 인덱스 계산
  let pageIndex;
  if (innerPages <= 10) pageIndex = 0;
  else if (innerPages <= 20) pageIndex = 1;
  else if (innerPages <= 30) pageIndex = 2;
  else if (innerPages <= 50) pageIndex = 3;
  else if (innerPages <= 100) pageIndex = 4;
  else if (innerPages <= 150) pageIndex = 5;
  else if (innerPages <= 200) pageIndex = 6;
  else if (innerPages <= 250) pageIndex = 7;
  else if (innerPages <= 300) pageIndex = 8;
  else if (innerPages <= 400) pageIndex = 9;
  else if (innerPages <= 500) pageIndex = 10;
  else pageIndex = 11;

  try {
    const unitPrice = priceTable[paperType][weightKey][bindingKey][printingKey][pageIndex];
    return Math.round(unitPrice * quantity);
  } catch (error) {
    console.error("Price calculation error:", error);
    return 0;
  }
}
